# 智易通(ZhiYiTong)小微企业财务软件

> 智能财务，易如反掌

## 品牌说明
- 中文名称：智易通
- 英文名称：ZhiYiTong
- 英文简称：ZYT
- 产品定位：AI驱动的智能财务管理系统
- 核心价值：通过AI技术赋能，让小微企业的财务管理变得简单、智能、高效

## 1. 项目概述

### 1.1 项目目标
开发一款适用于中国小微企业的财务软件，特点是易用性高、部署简单、符合中国会计准则。

### 1.2 技术栈
- 前端：Vue 3 + Element Plus + ECharts
- 后端：Node.js + Express
- 数据库：MySQL/SQL Server（双数据库支持）

## 2. 功能模块

### 2.1 核心功能
1. 凭证管理
   - 凭证录入（手工/导入）
   - 凭证审核
   - 凭证查询/打印

2. 账簿管理
   - 总账
   - 明细账
   - 科目余额表

3. 报表管理
   - 资产负债表
   - 利润表
   - 现金流量表

4. 期末处理
   - 结账
   - 结转损益

### 2.2 扩展功能
1. 往来管理
   - 应收账款
   - 应付账款

2. 固定资产
   - 资产卡片
   - 折旧计提

3. 票据管理
   - 发票管理
   - 开票/收票记录

## 3. 数据库设计

### 3.1 主要数据表
1. 会计科目表(Account_Subject)
2. 会计期间表(Accounting_Period)
3. 凭证主表(Voucher)
4. 凭证分录表(Voucher_Entry)
5. 科目余额表(Subject_Balance)
6. 辅助核算表(Auxiliary_Item)

### 3.2 数据库特点
- 支持MySQL 5.6+
- 支持SQL Server
- 完整的事务支持
- 数据一致性保证

## 4. 部署方案

### 4.1 单机版
- Windows安装程序
- 内置数据库
- 一键安装部署

### 4.2 网络版
- 局域网部署
- 支持多用户
- 权限管理

## 5. 开发计划

### 5.1 第一阶段：核心功能
- 基础数据
- 凭证管理
- 账簿查询
- 基础报表

### 5.2 第二阶段：扩展功能
- 往来管理
- 固定资产
- 工资管理
- 票据管理

### 5.3 第三阶段：增值功能
- 报表分析
- 决策支持
- 数据导入导出
- 远程服务

## 6. 特色功能

### 6.1 智能记账助手
- 常用凭证模板
- 智能科目推荐
- 自动平衡检查

### 6.2 数据安全
- 本地数据存储
- 自动备份机制
- 操作日志记录

### 6.3 实用工具
- Excel导入导出
- 批量处理功能
- 报表打印套打

## 7. 项目目录结构

```
project/
├── frontend/          # 前端项目
│   ├── src/
│   │   ├── views/    # 页面组件
│   │   ├── components/# 通用组件
│   │   ├── api/      # 接口定义
│   │   └── utils/    # 工具函数
│   └── public/       # 静态资源
├── backend/          # 后端项目
│   ├── src/
│   │   ├── controllers/# 控制器
│   │   ├── services/   # 业务逻辑
│   │   ├── models/     # 数据模型
│   │   └── utils/      # 工具函数
│   └── config/      # 配置文件
└── docs/            # 项目文档
```

## 8. 注意事项

### 8.1 开发规范
- 代码规范遵循ESLint
- 使用TypeScript
- Git版本控制
- 编写单元测试

### 8.2 安全考虑
- 数据加密存储
- 定期备份机制
- 访问权限控制
- 操作日志记录

### 8.3 性能优化
- 数据库索引优化
- 大数据量处理
- 并发访问处理
- 缓存机制

## 9. 联系方式

### 9.1 技术支持
- 远程协助
- 在线更新
- 问题反馈

### 9.2 文档支持
- 用户手册
- 安装手册
- 开发文档
- API文档

## 10. AI智能化设计

### 10.1 大模型集成
- 支持多个大模型提供商
  * OpenAI
  * 通义千问
  * 文心一言
  * 智谱AI
- 统一的模型调用接口
- 灵活的提供商切换机制

### 10.2 AI功能模块
1. 智能咨询
   - 会计准则解读
   - 税务政策咨询
   - 处理流程指导

2. 智能凭证处理
   - 票据内容理解
   - 业务场景分析
   - 智能科目推荐
   - 自动平衡处理

3. 智能财务分析
   - 财务报表解读
   - 经营状况分析
   - 风险预警提示
   - 决策支持建议

### 10.3 数据库设计
```sql
-- AI对话历史表
CREATE TABLE IF NOT EXISTS llm_conversation (
    id              INT PRIMARY KEY AUTO_INCREMENT,
    session_id      VARCHAR(50) NOT NULL,        -- 会话ID
    user_query      TEXT NOT NULL,               -- 用户问题
    llm_response    TEXT NOT NULL,               -- 模型回答
    context_data    JSON,                        -- 上下文数据
    model_provider  VARCHAR(50) NOT NULL,        -- 模型提供商
    tokens_used     INT NOT NULL,                -- token使用量
    created_at      DATETIME NOT NULL
);

-- 知识库表
CREATE TABLE IF NOT EXISTS llm_knowledge (
    id              INT PRIMARY KEY AUTO_INCREMENT,
    category        VARCHAR(50) NOT NULL,        -- 知识类别
    content         TEXT NOT NULL,               -- 知识内容
    embedding       JSON,                        -- 向量嵌入
    last_updated    DATETIME NOT NULL
);
```

### 10.4 系统架构
```plaintext
[用户界面层]
    ├── Web客户端
    ├── 桌面客户端
    └── 移动客户端

[业务逻辑层]
    ├── 核心业务模块
    ├── AI处理模块
    └── 数据分析模块

[AI中间件层]
    ├── 本地AI模型（简单任务）
    └── 大模型服务（复杂分析）

[数据持久层]
    ├── 业务数据库
    ├── AI知识库
    └── 模型配置库
```

### 10.5 安全与成本
1. 安全措施
   - API密钥加密存储
   - 敏感信息脱敏
   - 对话内容审计
   - 访问权限控制

2. 成本控制
   - Token使用量监控
   - 本地缓存机制
   - 分级调用策略
   - 并发请求控制

### 10.6 接口设计
```typescript
// AI服务接口
interface LLMService {
    // 智能分析
    analyze(context: BusinessContext): Promise<AIResponse>;
    
    // 提供建议
    suggest(query: BusinessQuery): Promise<Suggestion>;
    
    // 解释说明
    explain(document: FinancialDocument): Promise<Explanation>;
}
```

### 10.7 开发路线
1. 第一阶段
   - 基础AI功能集成
   - 简单对话支持
   - 基础知识库建设

2. 第二阶段
   - 智能凭证处理
   - 财务分析功能
   - 多模型协同

3. 第三阶段
   - 深度学习优化
   - 个性化推荐
   - 决策支持系统

## 11. 会计制度设计

### 11.1 制度支持
- 小企业会计准则
- 企业会计准则
- 民间非营利组织会计制度
- 支持后续扩展其他制度

### 11.2 数据库设计
1. 会计制度表(sys_accounting_system)
   - 制度基本信息
   - 版本管理
   - 生效日期
   - 状态控制

2. 科目模板表(sys_subject_template)
   - 标准科目库
   - 层级结构
   - 辅助核算
   - 使用说明

### 11.3 命名规范
1. 系统主库
   - 数据库名：zyt_sys
   - 用途：存储系统配置、企业信息、会计制度等

2. 企业账套库
   - 命名规则：zyt_company_编号
   - 示例：zyt_company_001
   - 特点：统一前缀，便于管理

### 11.4 账套创建流程
1. 基础信息采集
   - 企业信息
   - 会计制度选择
   - 启用期间设置
   - 本位币设置

2. 科目初始化
   - 基于选定的会计制度
   - 自动生成标准科目
   - 支持科目调整
   - 期初余额录入

3. 辅助核算设置
   - 客户管理
   - 供应商管理
   - 部门管理
   - 项目管理

### 11.5 特色功能
1. 制度切换
   - 支持会计制度变更
   - 科目映射工具
   - 数据转换向导
   - 变更日志记录

2. 智能辅助
   - 制度条文解读
   - 科目使用建议
   - 凭证编制指导
   - 合规性检查

3. AI增强
   - 自动识别业务类型
   - 智能科目匹配
   - 制度条文解答
   - 处理建议生成

### 11.6 数据结构
```sql
-- 会计制度表
CREATE TABLE sys_accounting_system (
    id              INT PRIMARY KEY,
    code            VARCHAR(50),    -- 制度编码
    name            VARCHAR(100),   -- 制度名称
    version         VARCHAR(50),    -- 版本号
    effective_date  DATE,          -- 生效日期
    status          TINYINT        -- 状态
);

-- 科目模板表
CREATE TABLE sys_subject_template (
    id              INT PRIMARY KEY,
    system_id       INT,           -- 会计制度ID
    code            VARCHAR(50),    -- 科目编码
    name            VARCHAR(100),   -- 科目名称
    category        VARCHAR(20),    -- 科目类别
    direction       TINYINT        -- 余额方向
);
```

### 11.7 注意事项
1. 数据安全
   - 制度数据定期备份
   - 变更操作审计
   - 权限精细控制

2. 性能优化
   - 科目树缓存
   - 模板预加载
   - 查询优化

3. 合规要求
   - 符合会计法规
   - 支持监管检查
   - 数据可追溯

### 11.8 后续规划
1. 制度扩展
   - 事业单位会计制度
   - 金融企业会计制度
   - 行业特殊规定

2. 功能增强
   - 多制度对照
   - 智能化升级
   - 报表适配

3. 工具支持
   - 制度对比工具
   - 科目对照工具
   - 数据迁移工具

## 12. AI全流程智能化设计

### 12.1 设计目标
- 实现会计工作全流程AI智能化
- 最大程度减少人工干预
- 提供专业级决策支持
- 确保合规性和准确性

### 12.2 核心功能模块

#### 12.2.1 智能单据处理
1. 票据识别
   - 多类型票据支持（发票、收据、合同、银行回单等）
   - 智能字段提取
   - 自动验证核对
   - 异常标记处理

2. 业务场景识别
   - 智能场景匹配
   - 自动科目推荐
   - 分录模板生成
   - 业务规则验证

#### 12.2.2 智能记账与复核
1. 自动记账
   - 智能分录生成
   - 自动科目匹配
   - 多币种处理
   - 往来自动对账

2. 智能审核
   - 自动平衡检查
   - 合规性验证
   - 异常交易识别
   - 风险预警提示

#### 12.2.3 智能财务分析
1. 财务指标分析
   - 关键指标计算
   - 趋势分析
   - 同行对标
   - 异常预警

2. 决策支持
   - 经营状况诊断
   - 风险评估
   - 优化建议
   - 预测分析

#### 12.2.4 智能报税与报表
1. 自动报税
   - 税款自动计算
   - 纳税申报表生成
   - 税收优化建议
   - 风险提示

2. 智能报表
   - 自动数据采集
   - 报表智能生成
   - 数据校验
   - 解读分析

#### 12.2.5 智能知识服务
1. 知识图谱
   - 会计准则
   - 税收政策
   - 行业规范
   - 最佳实践

2. 智能咨询
   - 政策解读
   - 业务指导
   - 操作咨询
   - 风险提示

### 12.3 技术实现

#### 12.3.1 AI模型体系
1. 文本识别模型
   - OCR识别
   - NLP处理
   - 文本分类
   - 实体提取

2. 决策模型
   - 规则引擎
   - 机器学习
   - 专家系统
   - 知识图谱

3. 分析模型
   - 统计分析
   - 预测模型
   - 异常检测
   - 模式识别

#### 12.3.2 数据处理流程
1. 数据采集
   - 多源数据收集
   - 实时同步
   - 数据清洗
   - 格式转换

2. 数据分析
   - 特征提取
   - 模式识别
   - 关联分析
   - 趋势预测

3. 结果应用
   - 自动处理
   - 人工确认
   - 结果反馈
   - 持续优化

### 12.4 安全与合规

#### 12.4.1 数据安全
- 数据加密存储
- 访问权限控制
- 操作日志记录
- 数据备份恢复

#### 12.4.2 合规保障
- 符合会计准则
- 满足监管要求
- 保护隐私数据
- 审计跟踪

### 12.5 效益分析

#### 12.5.1 直接效益
- 减少人工成本
- 提高工作效率
- 降低错误率
- 加快处理速度

#### 12.5.2 间接效益
- 提升决策质量
- 优化业务流程
- 降低经营风险
- 增强竞争力

### 12.6 实施策略

#### 12.6.1 分步实施
1. 基础功能
   - 单据识别
   - 自动记账
   - 基础报表

2. 进阶功能
   - 智能分析
   - 决策支持
   - 风险预警

3. 高级功能
   - 知识服务
   - 预测分析
   - 优化建议

#### 12.6.2 持续优化
- 模型迭代更新
- 规则持续优化
- 知识库扩充
- 用户反馈改进

### 12.7 AI与人工操作兼容性

#### 12.7.1 设计原则
- AI功能作为辅助增强，不完全替代人工
- 保留所有传统人工操作入口
- 重要环节必须经过人工确认
- 可随时切换AI/人工模式

#### 12.7.2 兼容机制
1. 单据处理
   - AI识别结果需人工确认
   - 可随时切换到人工录入
   - 保留完整验证记录

2. 自动记账
   - AI生成凭证需人工审核
   - 支持人工修改AI凭证
   - 完整的审核留痕

3. 智能审核
   - AI审核作为辅助参考
   - 保留人工审核权限
   - 可覆盖AI审核结果

4. 财务分析
   - AI分析作为决策参考
   - 支持人工调整参数
   - 保留传统分析方式

5. 风险预警
   - 预警需人工确认处理
   - 支持人工预警规则
   - 完整处理记录

6. 决策建议
   - AI建议仅供参考
   - 最终决策权在人工
   - 支持人工反馈

#### 12.7.3 安全保障
1. 操作安全
   - 重要环节人工把关
   - 可随时人工干预
   - 灵活的权限控制

2. 数据安全
   - 完整的操作日志
   - 详细的处理记录
   - 数据可追溯机制

#### 12.7.4 切换机制
1. 功能级切换
   - 可按功能模块开关AI
   - 可设置AI介入程度
   - 灵活的权限配置

2. 操作级切换
   - 单据级AI开关
   - 批次级处理选择
   - 临时切换机制
